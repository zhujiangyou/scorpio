{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>{{room_amenity.name}}</title>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1143945_p0azd9jns4r.css">
    <style type="text/css">
        *{
            padding:0;
            margin:0;
        }
        body{
            /*background-color: #202837;*/
            background-image: url(http://pinkslash.metatype.cn/static/images/bg.png);
            background-size: 100% auto;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .header {
          position: fixed;
          width: 100%;
          height: 44px;
          left: 0;
          top: 0;
          z-index: 100;
          background: #FFFFFF;
        }
        .header-title {
          height: 100%;
          font-size: 20px;
          border-bottom: 1px solid #f4f4f4;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .header-back {
          position: absolute;
          width: 44px;
          height: 44px;
          left: 0;
          top: 0;
          font-size: 30px !important;
          display: flex;
          align-items: center;
          justify-content: center;
        }


        button{
            outline:none!important;
        }

        .picture{
            width: 96%;
            height: 420px;
            margin:5px 2% 0 2%;
            position: relative;
            overflow: hidden;
            border-radius: 10px;
        }


        .img1{
            border-radius: 10px;
            /*width: 100%;
            height: 320px;*/
            position: absolute;
            width: 100%;
            height: auto;
            max-width: 100%;
            display: block;
            top:-15%;
        }

        .add-text{
            padding:10px 20px;
        }


        .duigou{
            position: absolute;
            right: -5px;top: -5px;
            width: 15px;height: 15px;
            display: none;
        }

        .addImage{
            width: 100%;
            color: white;
            font-size: 16px;
        }

        .addImage1{
            position: relative;
            border-radius: 2px;
            display: inline-block;
            width: 45%;
            margin:5px 2%;
            background-color: rgba(255,255,255,.1);
            border-right: 5px;
        }

        .image-item{
            border-top-left-radius: 2px;
            border-bottom-left-radius: 2px;
            width: 40%;
            height: auto;
            display: inline-block;
            vertical-align:middle;
        }
        .text-item{
            border-top-right-radius: 2px;
            border-bottom-right-radius: 2px;
            height: 100%;
            width: 50%;
            text-align: center;
            margin: 0 auto;
            font-size:12px;
            display: inline-block;
        }
        .reserve{
            text-align: center;
            margin-top: 50px;
        }

        .btn-color{
            background-color: #0c1d4a;
            color: white;
            font-size: 16px;
            padding:5px 50px;
            border:0;
        }


        /*modal开始*/
        .submit-modal{
            position: relative;
            width: 100%;
            height: 100%;
        }

        .money{
            background-color: #0c1d4a;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            position: absolute;
            left: 0;
            right: 0;
            top:-40px;
            margin: auto;
            text-align: center;
        }

        .money-modal{
            border-radius: 5spx;
        }

        .wenzi{
            text-align: left;
            color: black;
            padding:50px 10px 0 10px;
            font-size: 17px;
        }

        .money-btn{
            text-align: center;
            margin-top: 15px;
            border-radius: 5px;
        }
        .confirm{
            background-color: #0c1d4a;
            color:white;
            font-size: 20px;
            padding: 5px 40px;
            border-radius: 5px;
        }

        .cancel{
            color: #E6260F;
            font-size: 20px;
        }

        /*modal结束*/

        .footer{
            text-align: center;
            position: relative;
            height: 25px;
        }

        .img2{
            height: 25px;
            position: absolute;
            left: 0;
            right: 0;
            bottom: 44px;
            margin: auto;
            width: auto;
        }

        .add-text2{
            text-align: center;
            font-size: 12px;
            margin-top: 10px;
        }

        .addImage1{
            display: table;
            width: 46%;
            float: left;
        }

        .image-item{
            display: table-cell;
            vertical-align: middle;
            width: 100%;
        }

        .text-item{
            display: table-cell;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <!-- <div class="header">
        <span id="J_backBtn" class="header-back iconfont icon-arrow-left-s-line"></span>
        <h1 class="header-title">{{room_amenity.name}}</h1>
    </div> -->

    <br>
    <br>

    <div class="items">
        <div class="picture">
            <img src="{{room_amenity.img.url}}" class="img1">
        </div>
        <div class="addImage">
            <div class="add-text2">{{room_amenity.text}}</div>
            <div class="add-text">Add:</div>
            <div class="addImage1" {% if status == 0 %}  onclick="addImage(this)" {% endif %}>
                <img src="https://pinkslash.metatype.cn/static/images/orange1.jpg" class="image-item">
                <div class="text-item">Chysanthemum Hawthorn Drink</div>
                <img src="https://pinkslash.metatype.cn/static/images/duigou.svg" class="duigou" style="{% if Juice == 'true' %} display: block {% else %} display: none {% endif %}">
            </div>
            <div class="addImage1" {% if status == 0 %} onclick="addImage(this)" {% endif %}>
                <img src="https://pinkslash.metatype.cn/static/images/orange2.jpg" class="image-item">
                <div class="text-item">Special Passion Fruit Drink</div>
                <img src="https://pinkslash.metatype.cn/static/images/duigou.svg" class="duigou" style="{% if Champagne == 'true' %} display: block {% else %} display: none {% endif %}">
            </div>
        </div>

        <div class="reserve">
            {% if status == 0 %}
                <button class="btn-color" data-toggle="modal" data-target="#myModal" id="reserve">Reserve</button>
            {% else %}
                <button  class="button big blue-button">The package has been reserved.</button>
            {% endif %}
        </div>

    </div>
    <div class="footer" id="footer">
        <img src="https://pinkslash.metatype.cn/static/images/100years.png"" class="img2">
    </div>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="position: absolute;left: 0;right: 0; top: 180px;margin:auto;width: 60%;background-color: white;border-radius: 5px;">
            <div class="modal-content money-modal">
                <div class="money">
                    <img src="https://pinkslash.metatype.cn/static/images/credits.svg" style="width: 40px;height: 40px;margin:20px">
                </div>
                <div class="wenzi"></div>
                <div class="money-btn">
                    <!-- <a href=""> -->
                    <button class="confirm" id="confirm">Confirm</button>
                    <!-- </a> -->
                </div>
                <div class="money-btn"><button class="cancel" data-dismiss="modal">Cancel</button></div>
            </div>
        </div>
    </div>

</body>
</html>

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="{% static "/js/app.js" %}"></script>
<script type="text/javascript" >
    function changefooter(){
        footer.style.marginTop = '0px'
        var height = $(this).height() - $(".items").height() - 45;
        footer.style.height = height + 'px'
        if(height<=82){
            footer.style.height = '82px'
        }
    }
    
    $(document).ready(function(){
        changefooter()
    })
    
    $(window).resize(function(){
        changefooter()
    });


    function addImage(obj){
        if($(obj).find(".duigou").css("display") == 'none'){
            $(obj).find(".duigou").css("display","block")


        }else{
            $(obj).find(".duigou").css("display","none")
        }
    }

    // $(".addImage1").click(function(){
    //     if($(this).find(".duigou").css("display") == 'none'){
    //         $(this).find(".duigou").css("display","block")

    //         var choose

    //     }else{
    //         $(this).find(".duigou").css("display","none")
    //     }
    // })



    $("#reserve").click(function(){
        var credits = {{room_amenity.credit|safe}}

        var duigou1 = $(".duigou").eq(0).css("display")
        var duigou2 = $(".duigou").eq(1).css("display")
        var flag = 'false',flag2 = 'false';
        if(duigou1 == 'block'){
            flag = 'true'
            credits += 100
        }

        if(duigou2 == 'block'){
            flag2 = 'true'
            credits += 100
        }

        $('.wenzi').text('Reservation needs you to purchase '+ credits +' credits.')


    })

    $("#confirm").click(function(){
        var credits = {{room_amenity.credit|safe}}
        var duigou1 = $(".duigou").eq(0).css("display")
        var duigou2 = $(".duigou").eq(1).css("display")
        var flag = 'false',flag2 = 'false';
        if(duigou1 == 'block'){
            flag = 'true'
            credits += 100
        }

        if(duigou2 == 'block'){
            flag2 = 'true'
            credits += 100
        }

        // console.log(flag,flag2)

        window.location.href = 'https://pinkslash.metatype.cn/room_amenity/reserve/'+{{ room_amenity.id|safe }}+'/'+flag+'/'+flag2+'/'
    })

</script>
